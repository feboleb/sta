!function(U){U.fn.yith_trigger_multiple=function(i){return this.each(function(){var t=U(this);U.each(i,function(i,e){t.trigger(e)})})};var R=U("body"),A=U("html"),i=U(yith_wcms.dom.login),D=U(yith_wcms.dom.billing),T=U(yith_wcms.dom.shipping),z=U(yith_wcms.dom.order),e=U(yith_wcms.dom.payment),H=U(yith_wcms.dom.form_actions),j=U(yith_wcms.dom.coupon),E=U(yith_wcms.dom.create_account),Q=U(yith_wcms.dom.create_account_wrapper),$=(U(yith_wcms.dom.account_password),U(yith_wcms.dom.shipping_check)),B=U(yith_wcms.dom.button_back_to_cart),F={login:i,billing:D,shipping:T,order:z,payment:e},a=R.hasClass("logged-in"),t="yith_wcms_checkout_form",G="yith_wcms_checkout_current_step",m=function(i){return yith_wcms.steps_timeline[i]},J=function(t,i,e){return 0==i.length||i.is(":checked")||0==t||(t-=e.find(".validate-required").length,yith_wcms.wp_gdpr.is_enabled&&1==yith_wcms.wp_gdpr.add_consent_on_checkout&&(t=invalid_field+yith_wcms.wp_gdpr.consents_number)),0!=i.length&&i.is(":checked")&&yith_wcms.wp_gdpr.is_enabled&&1==yith_wcms.wp_gdpr.add_consent_on_checkout&&U.each(yith_wcms.wp_gdpr.consents,function(i,e){consent="#user_consents_"+i,U(consent).is(":checked")||(t+=1)}),t},K=function(){return R.width()<yith_wcms.max_mobile_width&&1==yith_wcms.have_mobile_timeline};U(window).on("yith_wcms_init resize",function(){var o,i;K()&&(U(yith_wcms.dom.checkout_timeline).prependTo(U(yith_wcms.dom.checkout_form)),o=U(yith_wcms.dom.checkout_timeline),U.each(F,function(i,e){var t,n=o.addClass("yith-is-mobile").find(yith_wcms.dom.timeline_id_prefix+i);0!=n.length&&(t=yith_wcms.dom.timeline_id_prefix+i+"-content",n.after('<li class="yith-timeline-step-mobile-content '+i+'" id="'+t.replace("#","")+'"></li>'),F[i].appendTo(U(t)))}),i=o.find("li.active").data("step"),U(yith_wcms.dom.timeline_id_prefix+i+"-content").append(H))}),R.on("updated_checkout yith_wcms_myaccount_order_pay",function(i){"updated_checkout"==i.type&&(F.payment=U(yith_wcms.dom.payment)),"payment"==H.data("step")&&U(yith_wcms.dom.payment).show(),R.trigger("yith_wcms_updated_checkout")}),R.hasClass("woocommerce-order-pay")&&R.trigger("yith_wcms_myaccount_order_pay"),"yes"==yith_wcms.live_fields_validation&&(U(yith_wcms.dom.checkout_form),R.on("blur","input:radio",function(){var i,e=U(this),t=e.closest(".form-row"),n=!0;t.is(".validate-required")&&("radio"==e.attr("type")&&(i=e.attr("name"),U("input[name="+i+"]").is(":checked")||(t.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),n=!1)),n&&t.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated"))})),R.on("yith_wcms_select2",function(i){var e;U().select2&&((e=function(){U("select.country_select, select.state_select").each(function(){var i={placeholder:U(this).attr("placeholder"),placeholderOption:"first",width:"100%"};U(this).select2(i)})})(),R.bind("country_to_state_changed",function(){e()}))}),1!=yith_wcms.wc_shipping_multiple&&R.trigger("yith_wcms_select2"),U(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li").on("click",function(i){i.preventDefault();var e=U(this);if(e.hasClass("active"))return!1;var t=U(yith_wcms.dom.checkout_timeline).find(yith_wcms.dom.active_timeline).data("step"),n=e.data("step"),o=m(n),c=!1!==o.prev?m(o.prev):m(o.next),d=c.next,s=c.prev,_=null;if(d==n?_=H.find(yith_wcms.dom.button_next):s==n&&(_=H.find(yith_wcms.dom.button_prev)),"login"==t&&a||null==_)return!1;r(_,t,d,s)}),H.find(yith_wcms.dom.button_prev).add(yith_wcms.dom.button_next).on("click",function(i){var e=U(this),t=H.data("step"),n=m(t),o=n.next,c=n.prev;r(e,t,o,c)});var r=function(i,e,t,n){var o,c,d=U(yith_wcms.dom.checkout_timeline),s=i.data("action"),_=H.find(yith_wcms.dom.button_prev),a=H.find(yith_wcms.dom.button_next),m=d.find(".active").data("step"),r=U(yith_wcms.dom.checkout_form);"prev"==s&&a.removeClass("disabled").removeAttr("disabled"),"yes"==yith_wcms.is_scroll_top_enabled&&(c=(o=U(yith_wcms.dom.scroll_top_anchor)).offset().top-o.outerHeight(!0),A.add(R).animate({scrollTop:c},500));var l,h,w=function(i){"order"==i||U(document).triggerHandler("yith_wmcs_show_coupon",i)?j.fadeIn(yith_wcms.transition_duration):j.fadeOut(yith_wcms.transition_duration)};if("yes"==yith_wcms.live_fields_validation){var y="login"==m||"billing"==m||"shipping"==m;if(yith_wcms.is_delivery_date_enabled&&(y=y||"order"==m),y&&"next"==s){var u,p,f,v,g,b,r=U(yith_wcms.dom.checkout_form),k=0;if(("billing"==m||"shipping"==m||yith_wcms.is_delivery_date_enabled&&"order"==m)&&r.find(yith_wcms.dom.required_fields_check).yith_trigger_multiple(yith_wcms.validate_checkout_event),"billing"!=m&&"login"!=m||(!yith_wcms.is_coupon_email_system_enabled||void 0!==(u=U(yith_wcms.dom.day_of_birth))&&(p=u.attr("pattern"),f=new RegExp("^"+p+"$","g"),""!=(v=u.val())&&0==f.test(v)&&u.parent().removeClass("woocommerce-validated").addClass("woocommerce-invalid-required-field").addClass("woocommerce-invalid")),void 0!==(g=U(yith_wcms.dom.email))&&g.hasClass("woocommerce-invalid-email")&&g.addClass("woocommerce-invalid-required-field"),k=D.find(yith_wcms.dom.wc_invalid_required).not(".ywsfd-validate-required").length,1!=yith_wcms.merge_billing_shipping&&(k=J(k,E,Q))),"shipping"==m||1==yith_wcms.merge_billing_shipping?((0!=(b=$.length)&&$.is(":checked")||0==b&&T.find("input").length)&&(k=T.find(yith_wcms.dom.wc_invalid_required).not(".ywsfd-validate-required").length,1==yith_wcms.merge_billing_shipping&&(k=J(k,E,Q))),yith_wcms.is_wc_checkout_addons_enabled&&(k+=U(yith_wcms.dom.wc_checkout_addons).find(yith_wcms.dom.wc_invalid_required).length),k+=T.find(yith_wcms.dom.additional_fields).find(">"+yith_wcms.dom.wc_invalid_required).length):yith_wcms.is_delivery_date_enabled&&"order"==m&&(k=z.find(yith_wcms.dom.wc_invalid_required).length),0!=k){if("login"!=m)return a.addClass("disabled").attr("disabled",!0),!1;t="billing"}}}d.find(".active").removeClass("active"),"next"==s?(H.data("step",t),l=U(yith_wcms.dom.timeline_id_prefix+t),K()?F[e].slideUp(yith_wcms.transition_duration,function(){F[t].slideDown(yith_wcms.transition_duration,function(){U(yith_wcms.dom.timeline_id_prefix+m.data("step")+"-content").first().append(H)}),U(yith_wcms.dom.timeline_id_prefix+m.data("step")+"-content").first().append(H),w(t)}):F[e].fadeOut(yith_wcms.transition_duration,function(){F[t].fadeIn(yith_wcms.transition_duration),w(t)}),l.toggleClass("active")):"prev"==s&&(h=U(yith_wcms.dom.timeline_id_prefix+n),H.data("step",n),K()?F[e].slideUp(yith_wcms.transition_duration,function(){F[n].slideDown(yith_wcms.transition_duration,function(){U(yith_wcms.dom.timeline_id_prefix+m.data("step")+"-content").append(H)})}):F[e].fadeOut(yith_wcms.transition_duration,function(){F[n].fadeIn(yith_wcms.transition_duration)}),w(n),h.toggleClass("active")),e=H.data("step");var C=U(yith_wcms.dom.checkout_timeline),x=(m=C.find("li.active")).index(),q=C.find("li").filter(":lt("+x+")").filter(":not(.active)");C.find("li.done").removeClass("done"),q.addClass("done"),1==yith_wcms.use_cookie&&Cookies.set(G,e,{path:"/"}),!0==("prev"==s&&!1===yith_wcms.steps_timeline[n][s]&&"login"==n)?a.val(yith_wcms.skip_login_label):a.val(yith_wcms.next_label);var O=!1,I=!1;"next"==s&&!1===yith_wcms.steps_timeline[t][s]&&(I=!0),"prev"==s&&!1===yith_wcms.steps_timeline[n][s]&&(O=!0),!0===O?_.fadeOut(yith_wcms.transition_duration):_.fadeIn(yith_wcms.transition_duration).css("display","inline-block"),!0===I?a.fadeOut(yith_wcms.transition_duration):a.fadeIn(yith_wcms.transition_duration).css("display","inline-block"),"payment"==e?(r.removeClass("processing"),"yes"==yith_wcms.disabled_prev_button&&_.fadeOut(yith_wcms.transition_duration),"yes"==yith_wcms.disabled_back_to_cart_button&&B.fadeOut(yith_wcms.transition_duration)):(r.addClass("processing"),"yes"==yith_wcms.disabled_back_to_cart_button&&B.fadeIn(yith_wcms.transition_duration))},n=H.find(yith_wcms.dom.button_next);D.find(".validate-required").find("input").add(E).on("blur click change",function(i){var e=D.find(yith_wcms.dom.wc_invalid_required).length;0!=(e=J(e,E,Q))?n.addClass("disabled").attr("disabled",!0):n.removeClass("disabled").removeAttr("disabled")}),T.find(".validate-required").find("input").add($).on("blur click change",function(i){$.is(":checked")&&0!=T.find(yith_wcms.dom.wc_invalid_required).length?n.addClass("disabled").attr("disabled",!0):n.removeClass("disabled").removeAttr("disabled")});var o=Cookies.get(t),c=(Cookies.get(G),function(){var i=U(".checkout.woocommerce-checkout").serialize();Cookies.set(t,i,{path:"/"})}),d=function(){$.find("input").on("change",function(i){c()}),U(yith_wcms.dom.checkout_form).find(yith_wcms.dom.required_fields_check).on("blur change",function(i){c()})};1==yith_wcms.use_cookie&&(d(),function(i){if(void 0!==i){var e=i.split("&");for(var t in e){var n,o,c,d,s,_,a=e[t];"string"==typeof a&&(n=a.split("="),o=decodeURIComponent('input[name="'+n[0]+'"]'),void 0!==(c=U(o))&&(d=decodeURIComponent(n[1]).replace(/\+/g," "),-1!=yith_wcms.dom.select2_fields.indexOf(n[0])?((s=U("#"+decodeURIComponent(n[0]))).add(c).val(d),s.is("select")?s.val(d).trigger("change"):s.is("input")&&c.val(d)):(_=!1,-1!=n[0].indexOf("payment_method")&&1==yith_wcms.skip_payment_method&&(_=!0),-1!=n[0].indexOf("shipping_method")&&1==yith_wcms.skip_shipping_method&&(_=!0),-1==n[0].indexOf("_wp")&&d&&0==_&&("checkbox"==c.prop("type")&&1==d?c.prop("checked","checked"):c.val(d)))))}}}(o),R.on("country_to_state_changed",function(i,e,t){d()})),void 0!==Cookies.get(G)&&1==yith_wcms.use_cookie&&R.on("updated_checkout yith_wcms_myaccount_order_pay",function(){U(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li#timeline-"+Cookies.get(G)).trigger("click")}),1==yith_wcms.is_order_received_endpoint&&1==yith_wcms.use_cookie&&(Cookies.remove(t,{path:"/"}),Cookies.remove(G,{path:"/"})),R.trigger("yith_wcms_init")}(jQuery);