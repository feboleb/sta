!function(u){u(document).on("yith_fields_init",function(){var e=u(".yith-plugin-fw-datepicker"),t=u(".yith-plugin-fw-colorpicker"),l={imgPreviewHandler:".yith-plugin-fw-upload-img-preview",uploadButtonHandler:".yith-plugin-fw-upload-button",imgUrlHandler:".yith-plugin-fw-upload-img-url",resetButtonHandler:".yith-plugin-fw-upload-button-reset",imgUrl:u(".yith-plugin-fw-upload-img-url")},i=u(".add_media"),a={sliderWrapper:u(".yith-plugin-fw .image-gallery ul.slides-wrapper"),buttonHandler:".yith-plugin-fw .image-gallery-button"},n=u(".yith-plugin-fw-sidebar-layout"),s=u(".yith-plugin-fw .yith-plugin-fw-slider-container .ui-slider-horizontal"),o=u(".codemirror"),r=u(".yit-icons-manager-wrapper");u(".yith-plugin-ui td.forminp-checkbox");e.each(function(){var e=u(this).data();e.showAnim=!1,e.beforeShow=function(e,t){t.dpDiv.addClass("yith-plugin-fw-datepicker-div")},e.onClose=function(e,t){t.dpDiv.removeClass("yith-plugin-fw-datepicker-div")},u(this).datepicker(e)}),t.wpColorPicker({palettes:!1,width:200,mode:"hsl",clear:function(){var e=u(this);e.val(e.data("default-color")),e.change()}}),t.each(function(){var e,t=u(this).data("variations-label"),i=u(this).closest(".yith-plugin-fw-colorpicker-field-wrapper"),a=u(this).closest(".yith-single-colorpicker"),n=i.find(".wp-picker-input-wrap"),l=a.find(".wp-picker-input-wrap");n.length&&i.find("a.wp-color-result").attr("title",t),a.length&&a.find("a.wp-color-result").attr("title",t),n.find(".wp-picker-clear-custom").length||(e=u("<span/>").attr({class:"wp-picker-default-custom"}),n.find(".wp-picker-default").wrap(e)),l.find(".wp-picker-clear-custom").length||(e=u("<span/>").attr({class:"wp-picker-default-custom"}),l.find(".wp-picker-default").wrap(e))}),"undefined"!=typeof wp&&void 0!==wp.media&&(l.imgUrl.change(function(){var e=u(this).val(),t=new RegExp("(http|ftp|https)://[a-zA-Z0-9@?^=%&amp;:/~+#-_.]*.(gif|jpg|jpeg|png|ico|svg)"),i=u(this).parent().find(l.imgPreviewHandler).first();i.length<1&&(i=u(this).parent().parent().find(l.imgPreviewHandler).first()),t.test(e)?i.html('<img src="'+e+'" style="max-width:100px; max-height:100px;" />'):i.html("")}).trigger("change"),u(document).on("click",l.uploadButtonHandler,function(e){e.preventDefault();var t,i,a=u(this).attr("id").replace(/-button$/,"");i||(t=[new wp.media.controller.Library({library:wp.media.query(),multiple:!1,title:"Choose Image",priority:20,filterable:"uploaded"})],(i=wp.media.frames.downloadable_file=wp.media({title:"Choose Image",library:{type:""},button:{text:"Choose Image"},multiple:!1,states:t})).on("select",function(){var e=i.state().get("selection").first().toJSON();u("#"+a).val(e.url),u("#"+a+"-yith-attachment-id")&&u("#"+a+"-yith-attachment-id").val(e.id),l.imgUrl.trigger("change")})),i.open()}),u(document).on("click",l.resetButtonHandler,function(e){var t=u(this),i=t.attr("id"),a=t.attr("id").replace(/-button-reset$/,""),n=u("#"+i).data("default");u("#"+a).val(n),l.imgUrl.trigger("change")})),i.on("click",function(){0}),"undefined"!=typeof wp&&void 0!==wp.media&&(u(document).on("click",a.buttonHandler,function(e){var t=u(this),i=t.closest(".image-gallery"),a=i.find(".image_gallery_ids"),n=a.val(),l=i.find("ul.slides-wrapper"),s=wp.media.frames.image_gallery=wp.media({title:t.data("choose"),button:{text:t.data("update")},states:[new wp.media.controller.Library({title:t.data("choose"),filterable:"all",multiple:!0})]});s.on("select",function(){s.state().get("selection").map(function(e){(e=e.toJSON()).id&&(n=n?n+","+e.id:e.id,l.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+e.sizes.thumbnail.url+'"/><ul class="actions"><li><a href="#" class="delete" title="'+t.data("delete")+'">x</a></li></ul></li>'))}),a.val(n)}),s.open()}),a.sliderWrapper.each(function(){var a=u(this);a.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(e,t){var i="";a.find("li.image").css("cursor","default").each(function(){var e=u(this).attr("data-attachment_id");i=i+e+","}),a.closest(".image-gallery").find(".image_gallery_ids").val(i)}})}),a.sliderWrapper.on("click","a.delete",function(){var e=u(this).closest(".image-gallery"),t=u(this).closest(".image-gallery ul.slides-wrapper"),i=e.find(".image_gallery_ids"),a="";u(this).closest("li.image").remove(),t.find("li.image").css("cursor","default").each(function(){var e=u(this).attr("data-attachment_id");a=a+e+","}),i.val(a)})),n.each(function(){u(this).find("img").on("click",function(){var e=u(this).closest(".yith-plugin-fw-sidebar-layout"),t=e.find(".yith-plugin-fw-sidebar-layout-sidebar-left-container"),i=e.find(".yith-plugin-fw-sidebar-layout-sidebar-right-container"),a=u(this).data("type");if(u(this).parent().children(":radio").attr("checked",!1),u(this).prev(":radio").attr("checked",!0),void 0!==a)switch(a){case"left":t.show(),i.hide();break;case"right":i.show(),t.hide();break;case"double":t.show(),i.show();break;default:t.hide(),i.hide()}})}),s.each(function(){var e=u(this).data("val"),t=u(this).data("min"),i=u(this).data("max"),a=u(this).data("step"),n=u(this).data("labels");u(this).slider({value:e,min:t,max:i,range:"min",step:a,create:function(){u(this).find(".ui-slider-handle").text(u(this).slider("value"))},slide:function(e,t){u(this).find("input").val(t.value),u(this).find(".ui-slider-handle").text(t.value),u(this).siblings(".feedback").find("strong").text(t.value+n)}})}),o.each(function(e,t){var i=CodeMirror.fromTextArea(t,{lineNumbers:1,mode:"javascript",showCursorWhenSelecting:!0});u(t).data("codemirrorInstance",i)}),u(document).on("click",".yith-plugin-fw-select-all",function(){u("#"+u(this).data("select-id")).find("option").prop("selected",!0).trigger("change")}),u(document).on("click",".yith-plugin-fw-deselect-all",function(){u("#"+u(this).data("select-id")).find("option").prop("selected",!1).trigger("change")}),r.each(function(){var s=u(this),o=s.find(".yit-icons-manager-icon-preview").first(),r=s.find(".yit-icons-manager-icon-text");s.on("click",".yit-icons-manager-list li",function(e){var t=u(e.target).closest("li"),i=t.data("font"),a=t.data("icon"),n=t.data("key"),l=t.data("name");o.attr("data-font",i),o.attr("data-icon",a),o.attr("data-key",n),o.attr("data-name",l),r.val(i+":"+l),s.find(".yit-icons-manager-list li").removeClass("active"),t.addClass("active")}),s.on("click",".yit-icons-manager-action-set-default",function(){s.find(".yit-icons-manager-list li.default").trigger("click")})}),u(document).on("click",".yith-plugin-fw-select-images__item",function(){var e=u(this),t=e.data("key"),i=e.closest(".yith-plugin-fw-select-images__wrapper"),a=i.find(".yith-plugin-fw-select-images__item"),n=i.find("select").first();n.length&&(n.val(t).trigger("yith_select_images_value_changed"),a.removeClass("yith-plugin-fw-select-images__item--selected"),e.addClass("yith-plugin-fw-select-images__item--selected"))}),u(document.body).trigger("wc-enhanced-select-init"),u(document).find(".ui-sortable .yith-toggle-elements").sortable({cursor:"move",axis:"y",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",stop:function(e,t){for(var i=jQuery(".ui-sortable-handle"),a=0,n=new Array,a=0;a<i.length;a++)n[a]=u(i[a]).data("item_key");0<n.length&&u(this).closest(".toggle-element").saveToggleElement(null,n)}}),u(document.body).trigger("yith-framework-enhanced-select-init")}).trigger("yith_fields_init"),u(document).on("click",".yith-plugin-fw-onoff-container span",function(){var e=u(this).prev("input");e.prop("checked")?e.prop("checked",!1).attr("value","no").removeClass("onoffchecked"):e.prop("checked",!0).attr("value","yes").addClass("onoffchecked"),e.change()}),u.fn.saveToggleElement=function(t,e){var i=u(this),a="yith_plugin_fw_save_toggle_element",n=i.serializeToggleElement(),l=i.find(".yith-toggle_wrapper"),s=l.attr("id"),o=u.urlParam("tab");n.append("security",l.data("nonce")),void 0!==e&&0<e.length&&n.append("yith_toggle_elements_order_keys",e),url=i.closest(".metaboxes-tab.yith-plugin-ui").length?(a="yith_plugin_fw_save_toggle_element_metabox",post_id=u(this).closest("form#post").find("#post_ID").val(),yit_metaboxes_nonce=u(this).closest("form#post").find("#yit_metaboxes_nonce").val(),metabox_tab=u(this).closest(".tabs-panel").attr("id"),yith_framework_fw_fields.ajax_url+"?action="+a+"&post_ID="+post_id+"&yit_metaboxes_nonce="+yit_metaboxes_nonce+"&toggle_id="+s+"&metabox_tab="+metabox_tab):yith_framework_fw_fields.admin_url+"?action="+a+"&tab="+o+"&toggle_id="+s,u.ajax({type:"POST",url:url,data:n,contentType:!1,processData:!1,success:function(e){t&&t.removeClass("show"),u(document).trigger("yith_save_toggle_element_done",[e,i])}})},u.fn.serializeToggleElement=function(){var e=u(this),i=new FormData,t=u(e).find(":input").serializeArray();return u.each(t,function(e,t){el_name=t.name,i.append(t.name,t.value)}),i},u.fn.formatToggleTitle=function(){var i,a,e=u(this),t=e.find(":input"),n=e.find("span.title").data("title_format"),l=e.find(".subtitle").data("subtitle_format"),s=new RegExp("[^%%]+(?=[%%])","g");void 0!==n&&(i=n.match(s)),void 0!==l&&(a=l.match(s)),u.each(t,function(e,t){void 0!==u(t).attr("id")&&($field_id=u(t).attr("id"),$field_array=$field_id.split("_"),$field_array.pop(),$field_id=$field_array.join("_"),$field_val=u(t).val(),null!=i&&void 0!==i&&-1!==i.indexOf($field_id)&&(n=n.replace("%%"+$field_id+"%%",$field_val)),null!=a&&void 0!==a&&-1!==a.indexOf($field_id)&&(l=l.replace("%%"+$field_id+"%%",$field_val)))}),""!==n&&e.find("span.title").html(n),""!==l&&e.find(".subtitle").html(l),u(document).trigger("yith-toggle-element-item-title",[e])},u.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.search);return null!==t&&(t[1]||0)},u(document).on("click",".yith-toggle-title",function(e){var t=u(e.target),i=t.closest(".yith-toggle-row"),a=i.find(".yith-toggle-content");if(t.hasClass("yith-plugin-fw-onoff")||t.hasClass("yith-icon-drag"))return!1;i.is(".yith-toggle-row-opened")?a.slideUp(400):a.slideDown(400),i.toggleClass("yith-toggle-row-opened")}),u(document).on("click",".yith-add-box-button",function(e){e.preventDefault();var t=u(this),i=t.data("box_id"),a=t.data("closed_label"),n=t.data("opened_label"),l=t.closest(".yith-toggle_wrapper").attr("id");template=wp.template("yith-toggle-element-add-box-content-"+l),""!==i&&(u("#"+i).html(template({index:"box_id"})).slideToggle(),""!==a&&(t.html()===a?t.html(n).removeClass("closed"):t.html(a).addClass("closed")),u(document).trigger("yith_fields_init"),u(document).trigger("yith-add-box-button-toggle",[t]))}),u(document).on("click",".yith-add-box-buttons .yith-save-button",function(e){e.preventDefault();var t=u(this).parents(".yith-add-box"),i=u(this).closest(".yith-toggle_wrapper").attr("id"),a=t.find(".spinner"),n=u(this).parents(".toggle-element"),l=t.find(":input"),s=n.find(".yith-toggle-row").length,o=u('<input type="hidden">');o.val(s),u(document).trigger("yith-toggle-change-counter",[o,t]),s=o.val();var r=wp.template("yith-toggle-element-item-"+i),d=u(r({index:s}));a.addClass("show"),u.each(l,function(e,t){void 0!==u(t).attr("id")&&($field_id=u(t).attr("id"),$field_val=u(t).val(),$field_id="radio"==u(t).attr("type")?($field_id=$field_id.replace("new_",""),$field_id=$field_id.replace("-"+$field_val,""),$field_id+"_dataindex-"+$field_val):$field_id.replace("new_","")+"_"+s,u(t).is(":checked")&&u(d).find("#"+$field_id).prop("checked",!0),(u(t).hasClass("yith-post-search")||u(t).hasClass("yith-term-search"))&&u(d).find("#"+$field_id).html(u("#"+u(t).attr("id")).html()),u(d).find("#"+$field_id).val($field_val))}),u(d).formatToggleTitle();var c=u('<input type="hidden">').val("yes");u(document).trigger("yith-toggle-element-item-before-add",[t,d,c]);setTimeout(function(){"yes"===c.val()&&(u(n).find(".yith-toggle-elements").append(d),u(t).find(".yith-plugin-fw-datepicker").datepicker("destroy"),u(t).html(""),u(t).prev(".yith-add-box-button").trigger("click"),n.saveToggleElement(),setTimeout(function(){u(n).find(".highlight").removeClass("highlight")},2e3),u(document).trigger("yith_fields_init"))},1e3)}),u(document).on("click",".yith-toggle-row .yith-save-button",function(e){e.preventDefault();var t=u(this).closest(".toggle-element"),i=u(this).closest(".yith-toggle-row"),a=i.find(".spinner");i.formatToggleTitle();var n=u('<input type="hidden">').val("yes");u(document).trigger("yith-toggle-element-item-before-update",[t,i,n]),"yes"===n.val()&&(a.addClass("show"),t.saveToggleElement(a))}),u(document).on("click",".yith-toggle-row .yith-delete-button",function(e){e.preventDefault();var t=u(this).closest(".toggle-element");u(this).closest(".yith-toggle-row").remove(),t.saveToggleElement()}),u(document).on("click",".yith-toggle-onoff",function(e){e.preventDefault(),u(this).closest(".toggle-element").saveToggleElement()}),u(document).on("click",".yith-plugin-fw-radio input[type=radio]",function(){u(this).closest(".yith-plugin-fw-radio").val(u(this).val()).trigger("change")}),u(document).on("click",".yith-password-eye",function(){var e=u(this),t=u(this).closest(".yith-password-wrapper").find("input");"password"===t.attr("type")?(t.attr("type","text"),e.addClass("yith-password-eye-closed")):(t.attr("type","password"),e.removeClass("yith-password-eye-closed"))}),u(document.body).on("yith-plugin-fw-init-radio",function(){u(".yith-plugin-fw-radio:not(.yith-plugin-fw-radio--initialized)").each(function(){u(this).val(u(this).attr("value")),u(this).addClass("yith-plugin-fw-radio--initialized")})}).trigger("yith-plugin-fw-init-radio"),u(document).on("select2:open",function(e){u(e.target).closest(".yith-plugin-ui").length&&u(".select2-results").closest(".select2-container").addClass("yith-plugin-fw-select2-container")});var s={selectors:{wrapper:".yith-plugin-fw-dimensions",units:{wrapper:".yith-plugin-fw-dimensions__units",single:".yith-plugin-fw-dimensions__unit",value:".yith-plugin-fw-dimensions__unit__value",selectedClass:"yith-plugin-fw-dimensions__unit--selected"},linked:{button:".yith-plugin-fw-dimensions__linked",value:".yith-plugin-fw-dimensions__linked__value",wrapperActiveClass:"yith-plugin-fw-dimensions--linked-active"},dimensions:{number:".yith-plugin-fw-dimensions__dimension__number"}},init:function(){var e=s;u(document).on("click",e.selectors.units.single,e.unitChange),u(document).on("click",e.selectors.linked.button,e.linkedChange),u(document).on("change keyup",e.selectors.dimensions.number,e.numberChange)},unitChange:function(e){var t=u(this).closest(s.selectors.units.single),i=t.closest(s.selectors.units.wrapper),a=i.find(s.selectors.units.single),n=i.find(s.selectors.units.value).first(),l=t.data("value");a.removeClass(s.selectors.units.selectedClass),t.addClass(s.selectors.units.selectedClass),n.val(l)},linkedChange:function(){var e=u(this).closest(s.selectors.linked.button),t=e.closest(s.selectors.wrapper),i=e.find(s.selectors.linked.value);"yes"===i.val()?(t.removeClass(s.selectors.linked.wrapperActiveClass),i.val("no")):(t.addClass(s.selectors.linked.wrapperActiveClass),i.val("yes"),t.find(s.selectors.dimensions.number).first().trigger("change"))},numberChange:function(e){var t=u(this).closest(s.selectors.dimensions.number),i=t.closest(s.selectors.wrapper);i.hasClass(s.selectors.linked.wrapperActiveClass)&&i.find(s.selectors.dimensions.number).val(t.val())}};s.init()}(jQuery);